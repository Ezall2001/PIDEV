{% extends 'layouts//admin.html.twig' %}

{% block body %}
	<style>
		th,
		td {
			width: 30%; /* set a fixed width for each th element */
			padding: 30px; /* adjust the padding as needed */
			text-align: left; /* center the text within each th element */
		}
		.btn-container {
			text-align: right;
			margin: 20px 40px 20px 0;
		}
	</style>
	<div class="content-page">
		<div
			class="content">

			<!-- Start Content-->
			<br>

			<div class="form-group">
				<input id="searchid" type="text" class="form-control" placeholder="Note Minimale">
			</div>
			<br>
			<div class="container-fluid">

				<div class="row">
					<div class="col-sm-12">
						<div class="table-responsive">
							<table>
								<div class="row">
									<div class="col-12">
										<div class="table-responsive">
											<table class="table table-left" id="results_table">
												<thead>
													<tr>
														<th>Note</th>
														<th>Test</th>
														<th>Etudiant</th>
													</tr>
												</thead>
												<tbody id="body">
													{% for i in result %}
														<tr>
															<td>{{i.mark}}</td>
															<td>{{i.getTest().getCourse().getName()}}</td>
															<td>{{i.getUser().getFirstName()}}
																{{i.getUser().getLastName()}}</td>
														</tr>
													{% endfor %}
												</tbody>
												<tbody id="searchResult"></tbody>
											</table>
										</div>
										<!-- end .table-responsive-->
									</div>
									<!-- end col -->
								</div>
								<!-- end row -->
							</div>
						</div>
						<!-- end row -->
					</div>
					<!-- container -->

				</div>
			</div>
		</div>
	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>

	<script>

		$(document).ready(function () {
$('#searchid').keyup(function () {
$('tbody#searchResult').html('');
var res = $(this).val();

if (true) {
$.ajax({
type: 'GET',
url: '{{ path('searchResult') }}',
data: {
'res': res
},
dataType: "text",
success: function (msg) {

var result = JSON.parse(msg);
$.each(result, function (key, arr) {
$.each(arr, function (id, res) {
if (key == 'res') {
if (id != 'error') {
if (res) {
$('#results_table tbody#body').hide();
console.log(res)
$('tbody#searchResult').append('<tr><td>' + res[0] + '</td><td>' + res[1] + '</td> <td>' + res[2] + '</td></tr>').show();
}
}
} else {
$('#results_table tbody#body').show();
$('tbody#searchResult').empty();
$('tbody#searchResult').fadeIn('fast');
}
});
});


}
});

}
});
});
	</script>
{% endblock %}
