{% extends 'layouts/admin.html.twig' %}
{% block stylesheets %}

	<!-- App favicon -->
	<link
	rel="shortcut icon" href="{{asset('images/favicon.ico')}}">

	<!-- App css -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css" integrity="sha512-LTumAojugr1KghbrzATeCmuR2d/w0MjXeeoHjM8iijp3q1g7zRuZ+Ww5ZSGVc+3k5/Kf4Xbgzwtr4yakBthU6Q==" crossorigin="anonymous"/>

	<link href="{{asset('templateAssets/css/bootstrap.min.css')}}" rel="stylesheet" type="text/css" id="bs-default-stylesheet"/>
	<link href="{{asset('templateAssets/css/app.min.css')}}" rel="stylesheet" type="text/css" id="app-default-stylesheet"/>

	<link href="{{asset('templateAssets/css/bootstrap-dark.min.css')}}" rel="stylesheet" type="text/css" id="bs-dark-stylesheet" disabled="disabled"/>
	<link
	href="{{asset('templateAssets/css/app-dark.min.css')}}" rel="stylesheet" type="text/css" id="app-dark-stylesheet"/>

	<!-- icons -->


	<link href="{{asset('templateAssets/css/icons.min.css')}}" rel="stylesheet" type="text/css"/>

{% endblock %}
{% block body %}
	<style>
		th,
		td {
			width: 10%; /* set a fixed width for each th element */
			padding: 30px; /* adjust the padding as needed */
			text-align: left; /* center the text within each th element */
		}
		.btn-container {
			text-align: right;
			margin: 20px 40px 20px 0;
		}
	</style>
	<div class="content-page">
		<div class="content">

			<!-- Start Content-->

			<!--button-->
				<div class="btn-container"> <a href="{{path('addQuestion')}}" class="btn btn-primary">
					<i class="fas fa-plus"></i>
					Ajouter une question</a>
				<br>
				<br>

				{{ form_start(form, {'attr': {'method': 'POST', 'novalidate': 'novalidate'}})}}

				{{ form_widget(form.name,{'attr': {'class': 'form-select'}}) }}
				<br>

				{{ form_end(form) }}

			</div>


			<div class="container-fluid">

				<div class="row">
					<div class="col-sm-12">
						<div class="table-responsive">
							<table>
								<div class="row">
									<div class="col-12">
										<div class="table-responsive">
											<table class="table table-left" id="results_table">
												<thead>
													<tr>
														<th>Numéro Question</th>
														<th>Option A</th>
														<th>Option B</th>
														<th>Option C</th>
														<th>Option D</th>
														<th>Réponse</th>
														<th>Question</th>
														<th>Actions</th>
													</tr>
												</thead>
												<tbody id="body">
													{% for i in questions %}
														<tr>
															<td>{{i.questionNumber}}</td>
															<td>{{i.optiona}}</td>
															<td>{{i.optionb}}</td>
															<td>{{i.optionc}}</td>
															<td>{{i.optiond}}</td>
															<td>{{i.correctOption}}</td>
															<td>{{i.question}}</td>
															<td>
																<a href="{{path('updateQuestionNour',{'id':i.id})}}" class="btn btn-success">
																	<i class="fas fa-edit"></i>
																</a>
																<a href="{{path('deleteQuestionNour',{'id':i.id})}}" class="btn btn-danger">
																	<i class="far fa-trash-alt"></i>
																</a>
															</td>
														</tr>
													{% endfor %}
												</tbody>
												<tbody id="search_result"></tbody>
											</table>
										</div>
										<!-- end .table-responsive-->
									</div>
									<!-- end col -->
								</div>
								<!-- end row -->
							</div>
						</div>
						<!-- end row -->
					</div>
					<!-- container -->

				</div>
			</div>
		</div>
	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
	<script>
		$(document).ready(function () {
$('#search_name').click(function () {
$('tbody#search_result').html('');
var res = $('#search_name option:selected').text();
if (true) {
$.ajax({
type: 'GET',
url:'{{ path('tri') }}',
data: {
'name': res
},
dataType: "text",
success: function (msg) {
var result = JSON.parse(msg);
$.each(result, function (key, arr) {
$.each(arr, function (id, res) {
if (key == 'name') {
if (id != 'error') {
if (res) {
$('#results_table tbody#body').hide();
console.log(res);
$('tbody#search_result').append('<tr><td>' + res[6] + '</td><td>' + res[2] + '</td> <td>' + res[3] + '</td> <td>' + res[4] + '</td> <td>' + res[5] + '</td> <td>' + res[1] + '</td> <td>' + res[0] + '</td> <td> <a class="btn btn-success  href="updateQuestion/' + res[7] + '"> <i class="fas fa-edit"></i>' + ' <a class="btn btn-danger  href="deleteQuestion/' + res[7] + '"> <i class="far fa-trash-alt"></i></td></tr>').show();
}
}
} else {
$('#results_table tbody#body').show();
$('tbody#search_result').empty();
$('tbody#search_result').fadeIn('fast');
}
});
});
}
});
}
})
});
	</script>
{% endblock %}
{% block javascripts %}
	<!-- Vendor js -->
	<script src="{{asset('templateAssets/js/vendor.min.js')}}"></script><!-- knob plugin --><script src="{{asset('templateAssets/libs/jquery-knob/jquery.knob.min.js')}}"></script><!--Morris Chart--><script src="{{asset('templateAssets/libs/morris.js06/morris.min.js')}}"></script>
	<script src="{{asset('templateAssets/libs/raphael/raphael.min.js')}}"></script><!-- Dashboar init js--><script src="{{asset('templateAssets/js/pages/dashboard.init.js')}}"></script>
	<script src="{{asset('templateAssets/js/app.min.js')}}"></script><!-- App js--><script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.4.0/js/bootstrap.min.js" integrity="sha512-S5e/axilSCdpkNcQK1fN7iX5Zag6nYef6UzP6Rw8ivQzjKdDcsk82srFuyi3m/RnRG6Fj+6efKVU6PwU0arW2A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
{% endblock %}
